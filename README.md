# Саджестор для PDF

Нашей целью будет разработать приложение, которое будет анализировать pdf-файлы, искать ключевые слова и, если найдёт, вставлять страницы с рекомендацуемыми ссылками для прочтения (или рекламой :smirk:).

Например, если мы попросили к слову "класс" рекомендовать ссылку на статью "Good article about classes", а к слову "объект" рекомендовать ссылку на статью "OOP principles in practice", то в результате работы нашего приложения должна будет в пдф вставиться страница с рекомендациями:

![image](https://user-images.githubusercontent.com/53707586/150125566-e0896061-5973-4ed7-97af-d787b5144bfa.png)

Нас больше будет интересовать техническая сторона вопроса, а не визуальная, поэтому мы не будем погружаться в возможности использования различных графических инструментов внутри pfd и наш блок рекомендаций будет состоять из обычного блока текста со ссылками.

# Старт
Сфоркните себе этот репозиторий, нажав на кнопку `Fork` справа вверху:

![image](https://user-images.githubusercontent.com/53707586/150126319-c8091c82-c6bf-4baa-a14f-cbcc82732680.png)

Теперь в вашем аккаунте появится "копия" этого репозитория. Нажмите на кнопку `Code` и скопируйте адрес для клонирования:

![image](https://user-images.githubusercontent.com/53707586/150126875-fbab7a69-b4f2-444a-9500-a2924b5d655e.png)

Откройте идею, выберите `File -> New -> Project from Version Control..` и вставтье туда этот адрес и нажмите `Clone`:

![image](https://user-images.githubusercontent.com/53707586/150126990-8f94175b-25f2-4a3e-9ddf-5ff78eca25f0.png)

У вас склонируется ваш репозиторий и откроется мавен-проект в идее. В нём уже подключены полезные зависимости в виде библиотеки для редактирования pdf и библиотеки полезных вспомогательных утилит в джаве:

```xml
    <dependencies>
        <dependency>
            <groupId>com.itextpdf</groupId>
            <artifactId>itext7-core</artifactId>
            <version>7.1.15</version>
            <type>pom</type>
        </dependency>
        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>2.11.0</version>
        </dependency>
    </dependencies>
```

В файле `data/config` заполняются те рекомендации, которые должно делать ваше приложение. По умолчанию он заполнен так:
```tsv
класс	Good article about classes	http://example.org/class
java	The Best Java course	http://example.org/java
объект	OOP principles in practice	http://example.org/objects
сканнер	How to use java.util.Scanner?	http://example.org/scanner
```

В каждой строке по три части, разделённых табом (`'\t'` в джаве):
1. Первая часть это ключевое слово, на которое должно реагировать приложение
2. Вторая часть это заголовок для рекомендуемой ссылки
3. Третья часть это сама рекомендуемая ссылка

**ВНИМАНИЕ:** из-за ограничений встроенных шрифтов, использовать для заголовков и прочего вставляемого в пдф-текста можно использовать только английские слова.

В папке `data/pdfs` находятся .pdf-файлы, которые надо обработать. В папку `data/converted` должны будут сохраняться результат редактирования.

# Требования
Если в тексте страницы встречается ключевое слово, то после этой страницы должна быть создана новая пустая страница и для каждого встреченного слова вставлена в неё рекомендуемая ссылка.

Если для какого-то ключевого слова в этой pdf уже была рекомендация, то повторяться она уже не должна.

Проверка встречаемости должна игнорировать регистр текста, т.е. при поиске слова `объект` должны подходить и `объект`, и `Объект`. Подсказка: посмотрите на существующие методы `String`-а.

Когда при запуске приложения вы считываете из файла `config` возможные рекомендации, вам надо проверять, что каждая строка состоит именно из трёх частей, а если не так, то кидать своё исключение `WrongLinksFormatException`.

# Заметки к реализации
Используйте `var` вместо типа локальной переменной - тип у неё всё равно будет, посто джава подставит его сама.

Для того чтобы получить все файлы в директории, используйте:
```java
var dir = new File("data/pdfs");
for (var fileIn : dir.listFiles()) {
```

Для того чтобы создать объект редактируемого pdf-документа, используйте:
```java
var doc = new PdfDocument(new PdfReader(fileIn), new PdfWriter(fileOut));
```

Для того чтобы получить объект страницы, используйте `doc.getPage(i)`. Обратите внимание, что страницы нумеруются с 1. Количество страниц в документе можно узнать через `doc.getNumberOfPages()`.

Чтобы получить весь текст страницы, используйте:
```java
var text = PdfTextExtractor.getTextFromPage(page);
```

Чтобы создать новую страницу в документе, используйте:
```java
var newPage = doc.addNewPage(номер куда вставлять);
```

Чтобы начать создавать вставляемый на страницу блок, используйте:
```java
var rect = new Rectangle(newPage.getPageSize()).moveRight(10).moveDown(10);
Canvas canvas = new Canvas(newPage, rect);
Paragraph paragraph = new Paragraph("Suggestions:\n");
paragraph.setFontSize(25);
// сюда вставтье логика добавления нужных ссылок
canvas.add(paragraph);
```

Чтобы добавить в создаваемый блок ещё одну ссылку, используйте:
```java
PdfLinkAnnotation annotation = new PdfLinkAnnotation(rect);
PdfAction action = PdfAction.createURI(ссылка);
annotation.setAction(action);
Link link = new Link(текст_ссылки, annotation);
paragraph.add(link.setUnderline());
paragraph.add("\n");
```

После окончания редактирования документа закройте его:
```java
doc.close();
```

Класс `Suggest` описывает объект одной рекомендации, соответствующий одной строке файла конфигурации.

Реализуйте `LinksSuggester`, который считывает конфигурацию из файла и имеет метод `suggest`, анализирующий переданный текст и возвращающий список из всех подошедших рекомендаций (проверку на то что рекомендация уже использовалась для этого документа должна быть в `main`, не в `LinksSuggester`).

# Как сдавать
Закоммитьте и запушьте ваши изменения в ваш публичный репозиторий и пришлите на него ссылку. 
